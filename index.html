<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memorie</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    
    <div class="overlay-menu">
        <section class="menu">
            <article class="BS">
                <h2>Meilleur score</h2>
                <p>0</p>
            </article>
            <h1>Nouvelle partie</h1>

            <article class="user">
                <h3>Nom d'utilisateur</h3>
                <input name="name" class="Default" type="text" value="User1"/>
                <p class="invalide hide">Le nom d'utilisateur doit contenir entre 1 et 20 caractères.</p>
            </article>
            <article class="Nb-choix">
                <h3>Nombre de cartes</h3>
                <select name="Nb" id="Nb">
                    <option class="SelecNbC" value="10">10 cartes</option>
                    <option class="SelecNbC" value="16">16 cartes</option>
                    <option class="SelecNbC" value="20">20 cartes</option>
                    <option class="SelecNbC" value="32">32 cartes</option>
                    <option class="SelecNbC" value="40">40 cartes</option>
                </select>
            </article>
        
            <article class="Niveau-choix">
                <h3>Niveau : </h3>
                <div class="Niveau-S" id="0">
                    <input type="radio" name="Niveau" class="Niveaux" value="Niv1"> Facile<br>
                    <input type="radio" name="Niveau" class="Niveaux" value="Niv2"> Moyen<br>
                    <input type="radio" name="Niveau" class="Niveaux" value="Niv3"> Difficile<br>
                    <input type="radio" name="Niveau" class="Niveaux" value="Niv4"> IMPOSSIBLE<br>
                </div>
                <p class="invalide hide">Choisissez un niveau</p>
            </article>
        
            <button class="play" id="0">Jouer !</button>
            <a href="test.html">TEST</a>
        </section>
    </div>

    <div class="corps">
        <section class="paquet">

            <article class="carte" id="C1"><p class="valeur">1</p></article>
            <article class="carte" id="C2"><p class="valeur">2</p></article>
            <article class="carte" id="C3"><p class="valeur">3</p></article>
            <article class="carte" id="C4"><p class="valeur">4</p></article>
            <article class="carte" id="C5"><p class="valeur">5</p></article>
            <article class="carte" id="C6"><p class="valeur">6</p></article>
        </section>
    
        <section class="commandes">
    
            <article class="Comm1" id="NbCartesAff">
                <h3>Nb de cartes</h3>
                <p id="nb">20</p>
            </article>
    
            <article class="Comm1" id="CoupsRestantsAff">
                <h3>Coups restants</h3>
                <p id="coups">50</p>
            </article>
    
            <article class="Comm1" id="ScoreAff">
                <h3>Score</h3>
                <p id="pts" value="0">16/20</p>
            </article>
    
            <button class="Comm1" id="New">Nouvelle partie</button>

        </section>
    </div>




    <script>

        /*BOUTONS DU MENU*/
        const BoutonJouer = document.querySelector(".play")
        const InputNom = document.querySelector(".user>input")
        const SelectionNombre = document.querySelector("#nb")
        const SelectNiv = document.querySelector('.Niveau-S')

        /*UNE PARTIE*/
        const cartes = document.querySelector("#nb")
        const coups = document.querySelector("#coups")
        const score = document.querySelector("#pts")

        /*NOUVELLE PARTIE*/
        document.querySelector("#New").addEventListener("click", NewParti)

        function NewParti(){
            document.querySelector(".BS>p").textContent = score.textContent
            document.querySelector(".overlay-menu").classList.remove("hide");
            //InputNom.value ="";
        }


        /*check pour jouer*/
        BoutonJouer.addEventListener("click",gaming)  


        function gaming(){
            if (!verifier()){                   /*avec les () parce qu'elle retourne un booléen (true ou false)*/
            }
            if (verifier()){
                initialisation();
            }

        }

        function initialisation(){
            console.log("initi");

            return
        }


        


        /*
        (- Mettre en jeu le nb de cartes selectionné)

        INITIALISATION
        - Ajouter un nb suffisant de variables (ex : une image avec un certain id)
        - Mettre les variables dans des listes
        - Mélanger les cartes en faisant des randint, on place la carte, puis supprimer son index des possibilités du randint

        - Pourquoi pas mélanger ET ajouter les cartes en même temps (niveau facile on les vois qq instants)
        

        JEU
        - fonction qui se retourne elle-même avec 2 variables
        - variable 1 : première carte selectionnée
        - on attend
        - variable 2 : 2eme carte selectionnée
        - on attend
        - si les cartes sont identiques, elles clignottes en vert et disparaissent
        - des points sont ajoutés au score (200 % nbcartes * quotient déterminé par niveau)
        - si les cartes sont différentes, elles clignottes en rouge puis disparaissent
        - le score reste le même
        - fin de la partie quand nb de carte = 1 (100/100 ou 20/20, etc)


        SCORE
        - pour voir l'évolution, on fait pas score = score + 200
                    mais plutot for i in range(200) : score +=1
                    avec un time out de qq mili secondes

        FIN
        Une page s'affiche avec :
        - Score
        - Meilleur score
        - Rejouer
        
        */




        /*vérifier si les infos sont valides*/

        function verifier(){
            if (InputNom.value.length<1 || InputNom.value.length>20){                       //Si le nom d'utilisateurn'est pas conforme
                if (SelectNiv.id == "0"){                                                                //et que le niveau n'a pas été coché       = ensemble non conforme
                    document.querySelectorAll(".invalide")[0].classList.remove("hide");
                    InputNom.value = "";
                    document.querySelectorAll(".invalide")[1].classList.remove("hide");
                    return (false)
                }else{                                                                                   //mais que le niveau a été coché           = ensemble non confomre
                    document.querySelectorAll(".invalide")[0].classList.remove("hide");
                    InputNom.value = "";
                    document.querySelectorAll(".invalide")[1].classList.add("hide");
                    return (false)
                }
            }else{                                                                           //Si le nom d'utilisateur est conforme
                if (SelectNiv.id == "0"){                                                                //mais que le niveau n'a pas été coché     = ensemble non confomre
                    document.querySelectorAll(".invalide")[0].classList.add("hide");
                    document.querySelectorAll(".invalide")[1].classList.remove("hide");
                    return (false)
                }else{                                                                                  //et que le niveau est coché                 = tout est conforme
                    cartes.textContent = "0/"+SelecNbC.value
                    
                    if (parseInt(SelectNiv.id)==1){
                        coups.textContent = parseInt(SelecNbC.value)*4;
                    }
                    if (parseInt(SelectNiv.id)==2){
                        coups.textContent = parseInt(SelecNbC.value)*3;
                    }
                    if (parseInt(SelectNiv.id)==3){
                        coups.textContent = parseInt(SelecNbC.value)*2;
                    }
                    if (parseInt(SelectNiv.id)==4){
                        coups.textContent = parseInt(SelecNbC.value);
                    }

                    score.textContent = 0;
                    document.querySelectorAll(".invalide")[0].classList.add("hide");
                    document.querySelectorAll(".invalide")[1].classList.add("hide");

                    document.querySelector(".overlay-menu").classList.add("hide");
                    console.log(InputNom.value+SelecNbC.value+ SelectNiv.id);

                    return (true)

                }
            }
        }


        /*POUR L'EFFET SUR LE INPUT*/    /*WARNING : ce code est INTÉGRALEMENT DE MOI, mais je l'ai repris d'un autre de mes projets (le site Bento)*/
        document.querySelector("body").addEventListener("click",RetourDefaultNom)   //quand on uclick sur l'écran (n'importe où) => lancer fonction change()
        InputNom.addEventListener("click",Write)   //quand on uclick sur l'écran (n'importe où) => lancer fonction change()

        InputNom.onblur = inpBL;                   //quand input est inactif (que l'utilisateur a cliqué ailleurs pour faire autre chose)
        InputNom.onfocus = inpFOC;                 //quand l'utilisateur utilise input (la barre de texte est présente dans la zone de texte)

        function inpBL(){InputNom.classList.add("BLUR")}         //Pour connaître l'état de la zone de texte (dans les conditions de l'autre fonction)
        function inpFOC(){InputNom.classList.remove("BLUR")}     // si BLUR est une classe de input, alors l'utilisateur n'utilise pas la zone de texte

        function RetourDefaultNom(){
            if (!(InputNom.classList.contains("Default"))){
                if (InputNom.value == "" && InputNom.classList.contains("BLUR")){     //si input est vide ET la zone de texte est déselectionnée
                    InputNom.value = "User1";      //Le texte redevient celui par défault, opacité 0.3 et reprend la classe Default.
                    InputNom.style.color = "rgb(0,0,0,0.4)";
                    InputNom.classList.add("Default");
                    
                    //L'ajout de la condition BLUR évite que input se remete automatiquement
                    //en valeur par défault lorsque l'utilisateur avait simplement effacé du texte
                    //pour changer l'adresse e-mail qu'il veut mettre. Ca créait un bug, aussi.
                }
            }
        }

        function Write(){
            if (InputNom.classList.contains("Default")){         //Pour savoir si le texte a cette valeur par défault, ou si L'UTILISATEUR a recopier la valeur par défault
                InputNom.value = "";                             //La zone de texte se vide automatiquement
                InputNom.style.color = "rgb(0,0,0,1)";           //Et l'opacité revient à 1
                InputNom.classList.remove("Default");            //Ce n'est plus une valeur par défault mais bien le texte de l'utilisateur
            }
        }


        /*NOMBRE DE CARTES*/

        const SelecNbC = document.querySelector("#Nb")  //la valeur selectionnée est SelecNbC.value


        /*NIVEAU*/
        /*a chaque fois qu'on en coche un, une variable change (par exemple, value, d'une variable plus globale)*/
        const niv1 = document.querySelectorAll(".Niveaux")[0]    //On associe la constante "niv1" à la section de code (le input) correspondant au 1er niveau
        const niv2 = document.querySelectorAll(".Niveaux")[1]
        const niv3 = document.querySelectorAll(".Niveaux")[2]
        const niv4 = document.querySelectorAll(".Niveaux")[3]

        niv1.addEventListener("change", () => {SelectNiv.id = "1"})  //en selectionnant ou reselectionnant ce input, le id du div prend sa valeur
        niv2.addEventListener("change", () => {SelectNiv.id = "2"})  //donc le id du div.Niveau-S correspond à la valeur sélectionnée, à chaque instant.
        niv3.addEventListener("change", () => {SelectNiv.id = "3"})
        niv4.addEventListener("change", () => {SelectNiv.id = "4"})

    
    </script>

</body>
</html>